package RA_IMPACTTYPE_RuleSet
expander ra_impacttype.dsl

import com.idsscheer.webapps.arcm.bl.re.ext.CollectiveHelper;
import com.idsscheer.webapps.arcm.bl.component.riskmanagement.re.RiskassessmentImpactTypeHelper;

# OBJECT        client_objid       LONG       Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
# OBJECT        client_sign        CLIENTSIGN Client                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
# OBJECT        create_date        DATE       Creation date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
# OBJECT        creator_user_id    LONG       User ID (creator)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
# OBJECT        delete_date        DATE       Deletion date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
# OBJECT        guid               STRING     GUID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# OBJECT        obj_id             LONG       ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
# OBJECT        obj_type           OBJECTTYPE Object type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
# OBJECT        root_guid          STRING     Root GUID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
# OBJECT        versions           LONG       Number of versions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
# VERSION       aris_change_date   DATE       ARIS change date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
# VERSION       change_date        DATE       Change date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
# VERSION       change_type        ENUM       Change type                                changetype (created=0,unchanged=1,changed=2,deleted=3,xmlcreated=4,xmlchanged=5,xmldeleted=6)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
# VERSION       change_user_id     LONG       User ID (editor)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
# VERSION       deactivated        BOOLEAN    Deactivated                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
# VERSION       id                 LONG       ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
# VERSION       substitute_user_id LONG       User ID (substitute)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# VERSION       version_active     BOOLEAN    Current version                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
# VERSION       version_number     LONG       Version number                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
# RA_IMPACTTYPE avg_loss           DOUBLE     Average amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
# RA_IMPACTTYPE currency           ENUM       Currency                                   currency (please_select=0,MIXED=-99,common=-1,AUD=8,CAD=26,CNY=30,EUR=47,GBP=50,JPY=74,USD=155,others=-2,AED=1,AFA=2,AFN=971,ALL=3,AMD=4,ANG=5,AOA=6,ARS=7,AWG=9,AZM=10,BAM=11,BBD=12,BDT=13,BGN=14,BHD=15,BIF=16,BMD=17,BND=18,BOB=19,BRL=20,BSD=21,BTN=22,BWP=23,BYR=24,BZD=25,CDF=27,CHF=28,CLP=29,COP=31,CRC=32,CSD=33,CUC=34,CUP=35,CVE=36,CYP=37,CZK=38,DJF=39,DKK=40,DOP=41,DZD=42,EEK=43,EGP=44,ERN=45,ETB=46,FJD=48,FKP=49,GEL=51,GGP=52,GHC=53,GIP=54,GMD=55,GNF=56,GTQ=57,GYD=58,HKD=59,HNL=60,HRK=61,HTG=62,HUF=63,IDR=64,ILS=65,IMP=66,INR=67,IQD=68,IRR=69,ISK=70,JEP=71,JMD=72,JOD=73,KES=75,KGS=76,KHR=77,KMF=78,KPW=79,KRW=80,KWD=81,KYD=82,KZT=83,LAK=84,LBP=85,LKR=86,LRD=87,LSL=88,LTL=89,LVL=90,LYD=91,MAD=92,MDL=93,MGA=94,MKD=95,MMK=96,MNT=97,MOP=98,MRO=99,MTL=100,MUR=101,MVR=102,MWK=103,MXN=104,MYR=105,MZM=106,MZN=943,NAD=107,NGN=108,NIO=109,NOK=110,NPR=111,NZD=112,OMR=113,PAB=114,PEN=115,PGK=116,PHP=117,PKR=118,PLN=119,PYG=120,QAR=121,ROL=122,RON=946,RSD=941,RUB=123,RWF=124,SAR=125,SBD=126,SCR=127,SDD=128,SDG=938,SEK=129,SGD=130,SHP=131,SIT=132,SKK=133,SLL=134,SOS=135,SPL=136,SRD=137,STD=138,SVC=139,SYP=140,SZL=141,THB=142,TJS=143,TMM=144,TND=145,TOP=146,TRL=147,TRY=148,TTD=149,TVD=150,TWD=151,TZS=152,UAH=153,UGX=154,UYU=156,UZS=157,VEB=158,VEF=937,VND=159,VUV=160,WST=161,XAF=162,XAG=163,XAU=164,XCD=165,XDR=166,XOF=167,XPD=168,XPF=169,XPT=170,YER=171,ZAR=172,ZMK=173,ZWD=174)
# RA_IMPACTTYPE exp_avg_loss       DOUBLE     Expected loss (average)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
# RA_IMPACTTYPE exp_max_loss       DOUBLE     Expected loss (maximum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
# RA_IMPACTTYPE exp_min_loss       DOUBLE     Expected loss (minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
# RA_IMPACTTYPE frequLossQual      LIST       Occurrence frequency                       to 1 FREQUENCY (LT=5812)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
# RA_IMPACTTYPE frequ_avg_loss     DOUBLE     Average occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
# RA_IMPACTTYPE frequ_max_loss     DOUBLE     Maximum occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
# RA_IMPACTTYPE frequ_min_loss     DOUBLE     Minimum occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
# RA_IMPACTTYPE impacttype         LIST       Impact type                                to 1 IMPACTTYPE (LT=5810)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# RA_IMPACTTYPE isFilled           BOOLEAN    Is filled
# RA_IMPACTTYPE lossQual           LIST       Amount of damages                          to 1 QUOTATION (LT=5811)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
# RA_IMPACTTYPE max_loss           DOUBLE     Maximum amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
# RA_IMPACTTYPE min_loss           DOUBLE     Minimum amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
# RA_IMPACTTYPE owner_status       ENUM       Owner status                               assessment_state (all=-1,open=0,closed=-3,new=1,in_progress=2,to_be_reviewed=-2,assessed=3,assessment_not_possible=4,not_assessed=5)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
# RA_IMPACTTYPE redFrequLossQual   LIST       Reduced occurrence frequency               to 1 FREQUENCY (LT=5814)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
# RA_IMPACTTYPE redLossQual        LIST       Reduced amount of damages                  to 1 QUOTATION (LT=5813)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
# RA_IMPACTTYPE red_avg_loss       DOUBLE     Reduced average amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
# RA_IMPACTTYPE red_exp_avg_loss   DOUBLE     Reduced expected loss (average)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
# RA_IMPACTTYPE red_exp_max_loss   DOUBLE     Reduced expected loss (maximum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
# RA_IMPACTTYPE red_exp_min_loss   DOUBLE     Reduced expected loss (minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
# RA_IMPACTTYPE red_frequ_avg_loss DOUBLE     Reduced average occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# RA_IMPACTTYPE red_frequ_max_loss DOUBLE     Reduced maximum occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# RA_IMPACTTYPE red_frequ_min_loss DOUBLE     Reduced minimum occurrence frequency                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
# RA_IMPACTTYPE red_max_loss       DOUBLE     Reduced maximum amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
# RA_IMPACTTYPE red_min_loss       DOUBLE     Reduced minimum amount of damages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
# RA_IMPACTTYPE type               ENUM       Assessment type                            assessment_type (all=-1,please_select=0,both=1,quantitative=2,qualitative=3)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

# DO NOT CHANGE THE LINES ABOVE - all of them will be updated automatically by tool com.idsscheer.webapps.arcm.bl.re.RETemplater

################################################
### All workflow states - before state rules ###


rule "hide fields for quantitative assessments if type is only qualitative [I,V]"

	salience 10100

	when
        "type" is_not filled OR
		value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "qualitative"

	then
		set "avg_loss" invisible
		set "max_loss" invisible
		set "min_loss" invisible
		set "frequ_avg_loss" invisible
		set "frequ_max_loss" invisible
		set "frequ_min_loss" invisible
		set "red_avg_loss" invisible
		set "red_max_loss" invisible
		set "red_min_loss" invisible
		set "red_frequ_avg_loss" invisible
		set "red_frequ_max_loss" invisible
		set "red_frequ_min_loss" invisible
		set "exp_avg_loss" invisible
		set "exp_max_loss" invisible
		set "exp_min_loss" invisible
		set "red_exp_avg_loss" invisible
		set "red_exp_max_loss" invisible
		set "red_exp_min_loss" invisible
		
		########################
		### BB CUSTOMIZATION ###
		set "bb_frequ_relevant_events" invisible
		set "bb_near_loss" invisible
		set "bb_operational_gain" invisible
		set "bb_oportunity_cost" invisible
		set "bb_lost_income" invisible
		
		## NEILA
        set "th_exp_min_loss" invisible
        set "th_exp_avg_loss" invisible
        set "th_exp_max_loss" invisible
        set "bb_frequ_sum_loss" invisible
        set "bb_red_frequ_sum_loss" invisible
        set "bb_sum_loss" invisible
        set "bb_red_sum_loss" invisible
        set "quant_id" invisible  
        set "type" invisible
           		
end

rule "hide fields for qualitative assessments if type is only quantitative [I,V]"

	salience 10000

	when
	    "type" is_not filled OR
	    value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "quantitative"

	then
		set "lossQual" invisible
		set "frequLossQual" invisible
		set "redLossQual" invisible
		set "redFrequLossQual" invisible
		
		## NEILA
		set "type" invisible
		set "currency" invisible
		set "bb_criticidadeFinal" invisible
		set "quali_id" invisible
		 
end

########################################################
### Workflow state ra_impacttype "openForExecution"  ###

rule "define editable and recommended fields for quantitative assessments [I,V]"

	salience 1300

	when
	    is in workflow state "openForExecution"
		( value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "both" OR
		  value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "quantitative" )

	then
		set "min_loss"              readonly
		set "avg_loss"              readonly
		set "max_loss"              readonly
		set "red_min_loss"          readonly
		set "red_avg_loss"          readonly
		set "red_max_loss"          readonly
        
        ########################
		### BB CUSTOMIZATION ###
		set "bb_frequ_relevant_events"  readonly
		set "bb_near_loss"          	readonly
		set "bb_operational_gain"   	readonly
		set "bb_oportunity_cost"    	readonly
		set "bb_lost_income"        	readonly
		set "frequ_min_loss"        	readonly
		set "frequ_avg_loss"        	readonly
		set "frequ_max_loss"        	readonly
		set "red_frequ_min_loss"    	readonly
		set "red_frequ_avg_loss"    	readonly
		set "red_frequ_max_loss"    	readonly
		
		#set "avg_loss"              	recommended
		#set "frequ_avg_loss"        	recommended
end

rule "recommended fields for quantitative assessments become mandatory if risk assessment has owner status 'completed' [I,V]"

	salience 1200

	when
        #owner status is copied internally by riskassessment cache command
        value comparison fulfilled: ":transient:" attr_value "owner_status" "CONTAINS" value "assessed"

	then
        set "avg_loss"              mandatory
        set "frequ_avg_loss"        mandatory
        set "bb_criticidadeFinal"   mandatory

end

rule "define editable and recommended fields for qualitative assessments [I,V]"

	salience 1100

	when
	    is in workflow state "openForExecution"
		( value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "both" OR
		  value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "qualitative" )

	then
		set "lossQual"              editable
		set "frequLossQual"         editable
		set "redLossQual"           invisible
		set "redFrequLossQual"      invisible

        #
        # BdB CUSTOMIZATION
        #
        
     	set "lossQual"              mandatory
        set "frequLossQual"         mandatory                
        set "bb_criticidadeFinal"   editable
        set "bb_criticidadeFinal"   mandatory

end

rule "define fields not mandatory [I,V]"

	salience 1000

	when
	    ( value comparison fulfilled: ":transient:" attr_value "owner_status" "CONTAINS" value "assessment_not_possible")
		( value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "both" ) OR
		( value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "qualitative" )
		 

	then
		set "lossQual"              not_mandatory
        set "frequLossQual"         not_mandatory                
        set "bb_criticidadeFinal"   editable
        set "bb_criticidadeFinal"   not_mandatory

end

rule "recommended fields for qualitative assessments become mandatory if risk assessment has owner status 'completed' [I,V]"

	salience 1000

	when
        #owner status is copied internally by riskassessment cache command
        value comparison fulfilled: ":transient:" attr_value "owner_status" "CONTAINS" value "assessed"

	then
        set "lossQual"              mandatory
        set "frequLossQual"         mandatory

end

###############################################
### All workflow states - after state rules ###

#
# reset the 'isFilled' flag first before executing the next two rules
#
rule "reset filled flag first [V]"

    salience 160

	when


	then
        set "isFilled" to value "false"

end

#
# if all needed quantitative values are filled then set the 'isFilled' flag.
# This flag is read by the rules of riskassessment if the owner_state there shall be set to 'assessed'
#
rule "set filled flag if quantitative values are filled [V]"

    salience 150

	when
	    "avg_loss"       is filled
	    "frequ_avg_loss" is filled
        #value comparison fulfilled: ":persistent:" attr_value "isFilled" "EQUALS" value "false"

	then
        set "isFilled" to value "true"

end

#
# if all needed qualitative values are filled then set the 'isFilled' flag.
# This flag is read by the rules of riskassessment if the owner_state there shall be set to 'assessed'
#
rule "set filled flag if qualitative values are filled [V]"

    salience 140

	when
	    "lossQual"       		is filled
	    "frequLossQual"  		is filled
	    "bb_criticidadeFinal"   is filled
        #value comparison fulfilled: ":persistent:" attr_value "isFilled" "EQUALS" value "false"

	then
        set "isFilled" to value "true"

end

#
# (1) 0 <= min_loss     <= avg_loss     <= max_loss
# (2) 0 <= red_min_loss <= red_avg_loss <= red_max_loss
#
# but NOT the same with the 'exp' attributes!
#
rule "check losses [V]"

    salience 130

	when

	then
		check losses "min_loss"     "avg_loss"     "max_loss"
		check losses "red_min_loss" "red_avg_loss" "red_max_loss"

end

#
# all frequencies >= 0
#
rule "check frequencies  [V]"

	salience 120

	when

	then
		check frequencies "frequ_min_loss"     "frequ_avg_loss"     "frequ_max_loss"
		check frequencies "red_frequ_min_loss" "red_frequ_avg_loss" "red_frequ_max_loss"

end

rule "reset fields for qualitative assessments [I,V]"

	salience 110

	when
		"type" is dirty
		value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "qualitative"

	then
		#note: currency will NOT be touched
		reset "avg_loss" to default_value
		reset "max_loss" to default_value
		reset "min_loss" to default_value
		reset "frequ_avg_loss" to default_value
		reset "frequ_max_loss" to default_value
		reset "frequ_min_loss" to default_value
		reset "red_avg_loss" to default_value
		reset "red_max_loss" to default_value
		reset "red_min_loss" to default_value
		reset "red_frequ_avg_loss" to default_value
		reset "red_frequ_max_loss" to default_value
		reset "red_frequ_min_loss" to default_value
		reset "exp_avg_loss" to default_value
		reset "exp_max_loss" to default_value
		reset "exp_min_loss" to default_value
		reset "red_exp_avg_loss" to default_value
		reset "red_exp_max_loss" to default_value
		reset "red_exp_min_loss" to default_value

end

rule "reset fields for quantitative assessments [I,V]"

	salience 100

	when
		"type" is dirty
		value comparison fulfilled: ":transient:" attr_value "type" "CONTAINS" value "quantitative"

	then
		reset "lossQual" to default_value
		reset "frequLossQual" to default_value
		reset "redLossQual" to default_value
		reset "redFrequLossQual" to default_value
		reset "bb_criticidadeFinal" to default_value

end

#########################
# BdB CUSTOMIZATION 
#
rule "hide fields [I,V]"

	salience 90

	when

	then
		set "redLossQual"      invisible
        set "redFrequLossQual" invisible		
end

